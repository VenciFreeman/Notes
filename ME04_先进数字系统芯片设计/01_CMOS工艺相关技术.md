# CMOS工艺相关技术

[TOC]

## 平面CMOS电路加工流程

> 从电路设计的角度看，忽略工艺细节，着重与版图设计的联系

### 如何在SiO<sub>2</sub>层上刻蚀一个孔

- 根据材料和尺寸要求的不同，刻蚀有多种工艺手段
- 可以在需要的材料上做有选择的保留
- 可以产生有选择的阻挡作用 (制备牺牲层)
- 可以产生坑状区域 (异质集成)
- 可以产生贯通孔洞 (TSV)
- <u>图形的产生取决于**光刻**</u>

### 如何在做一个平面CMOS晶体管

- 制备硅衬底
- 在衬底上方生长厚的SiO<sub>2</sub>氧化层
- 光刻1：源区做NMOS的区域
- 在上方生长薄的栅氧层
- 再在上方生长多晶栅 
  - **先做栅，再做源和漏**：顺序颠倒会有技术问题
- 光刻2：去除其他多余的多晶硅，只保留一部分形成栅
  - 多晶硅栅性能不如金属，但对刻蚀抵抗力强
- 刻出源漏扩散区域
  - 刻蚀时间很短，所以只刻蚀到薄氧化层
- 扩散：光刻1和2控制形成源漏区域
  - 掺杂形成n<sup>+</sup>区
- 生长金属下绝缘层
- 光刻3：形成金属和下层接触孔
  - 使用特殊的孔光刻板
- 生长金属层
  - 孔中要先做欧姆接触，底层为铝，上层为铜
- 光刻4：形成金属连线

### 小结

- 三个基本工艺
  - 层生长
  - 硅衬底中形成扩散区
  - 光刻
- 只有光刻是个性化的
- 平面工艺，多步骤形成立体器件，类似印刷
- 栅线条宽度 (沟道长度)是最小尺寸，决定了器件速度，称为特征尺寸，即工艺代名词
- 栅和源漏的间距很关键，不能有距离，搭接要小；关键在于自对准工艺

### 如何做出反相器

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig01.jpg)

-  包括一个NMOS晶体管和一个PMOS晶体管
-  PMOS晶体管只能在n型环境中制造，所以在p型衬底上浅掺杂出n阱
   -  浅掺杂是浓度浅，而n阱的深度较深
   -  每个n阱会放多个NMOS管

#### n<sup>+</sup>扩散作用

- 电位电压比衬底高，不会使得沟道导通
- 衬底和阱电位相同，避免MOS器件衬偏调制效应
  - 衬底接地，阱接电源，否则源漏p-n结可能导通
  - 保证阈值电压相同
- 防止闩锁效应
  - 阱的边缘不能太靠近NMOS/PMOS晶体管

### 拓展

- FinFET
  - 10-16 nm工艺
  - 非平面工艺
  - 栅三面包围沟道
    - 断开时漏电流更小
- 纵向GAA (Gate-All-Around)晶体管
  - 3-5 nm工艺
  - 四面包围
    - 断开时漏电流比FinFET更小
  - 单型均匀V-GAA无结晶体管作为有源器件
  - 设备结构简单
    - 均匀掺杂
    - 通过材料沉积形成器件
- 天桥 (Skybridge) 3D电路
  - 适用于物理实现的动态电路
  - 支持具有双轨和单轨输入的复合，级联动态电路

## 版图设计及规则

### 光刻和设计规则

- 光刻需要掩模版，掩模版需要版图
- 电路 ==> 版图 ==> 制版数据 ==> 掩模版
- 尺寸要小，但不能小到做不出来或严重降低成品率 (Yield)
- 设计规则 (Design Rule)：规定不能断线、短接或保障光刻套进度等方方面面的尺寸要求
- DR是如何获得的：工艺优化和流片评估的迭代

版图设计的一些约定

- 串联门的画法
  - 源漏共用
- 大尺寸晶体管画法
  - 小尺寸晶体管并联实现
- N\P管的排列、方向
  - N管和P管逐行交叉
  - 方向相同
- 走线方向和层次安排
  - 专门的金属层布电源和地线
  - 其他横竖逐行交叉
  - 各层通过过孔 (via)和接触孔连接
- 电源地的安排
  - 通过网格或十字交叉等方式的特殊走向
  - 保证不短路且覆盖所有地方
- 金属线宽度和宽线
  - DR考量
  - 尤其是做定式化电路需要考虑
- 整体布局
  - 版图规划

## 数字集成电路版图实例

### 0.6μm工艺示意图

- 画扩散区
- 画接触孔
- 画PMOS
- 画阱
- NMOS + PMOS
- 画输出金属连线
- 标注
- 阱接电源，衬底接地
  - 蓝色是金属层
  - 晶体管源和漏有晶体接触
  - 绿色为晶体管 (上面为PMOS，下面为NMOS)
    - 空穴迁移率比电子迁移率低一约半，所以PMOS响应更慢
    - 为了两者一致需要PMOS为NMOS一倍
  - 红色为多晶栅
  - 黑色为接触孔

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig02.jpg)

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig03.jpg)

|     阱     | 薄氧化层 (做晶体管的区域) | NMOS管区域 |  PMOS管区域  |
| :--------: | :-----------------------: | :--------: | :----------: |
| **多晶硅** |         **孔板**          | **金属板** | **整个版图** |

## 寄生效应

### 寄生电阻

- 电阻不可忽略
- 影响晶体管特性，所以把源和漏用金属线贯通
  - 需要用方案3，而不是方案4

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig04.jpg)

#### 过孔电阻

> Via Resistance

- 多孔串联可以减小有效接触电阻
- 铜工艺有更小的过孔电阻

### 寄生电容

- 栅-沟道电容

  - 栅氧很薄，所以栅电容是最大的寄生电容

- 栅-源/漏搭接 (overlap)电容

- 衬底扩散电容

  $$
  C_{SB}=C_{DB}=(W+2I_{diff})(L_D+2I_{diff})
  $$

- 多栅电容

$$
R_{gate}=L_{gate}R_{sq,poly}
$$

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig05.jpg)

- 线的寄生电容
  - 上下层间电容
  - 同层连线间电容

### 延迟效应

$$
Delay=\sum_i(\sum_{j=1}^{j=i}R_j)C_i
$$

#### 延迟带来的问题

- 逻辑门输出变化可视为负载电容充放电，产生电路延迟
- 器件自身翻转延迟越来越小
- 线延迟占据比例越来越大 (50%)以上
- 大的负载需要大的驱动
  - 一般负载超过4个标准反相器就需要增加驱动
  - 增加驱动的方法是插入大宽长比的反相器，称为驱动器 (Buffer)
  - 更大的Buffer需要串联，一级带一级，逐级增加；或分成树状支路形式

### 串扰效应

> Cross Talk，影响信号完整性

- 同时切换的时序效应
- 耦合节点切换的噪声影响
  - 一般不允许两根线并排太长

### 闩锁效应

> Latch Up

- p-n结处形成寄生双极晶体管
- 闩锁-寄生晶体管导通时

![](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig06.jpg)

![等效电路和特征曲线](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig08.jpg)

#### 寄生SCR

- 目的：将孔/基板连接到电源
- 建议
  - 保守：每个电源连接都有1个基板触点
  - 相对不保守：每5-10个晶体管1个基板触点
  - 大电流电路：使用保护环

##### 保护环

![保护环](https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig07.jpg)

### 电压降效应

> IR Drop

- 在DSM中，V<sub>DD</sub>实际上是RC网格
  - 从电网汲取电流时，电压下降到理想的V<sub>DD</sub>以下
  - 当V<sub>DD</sub>下降时，延迟增加，设计可能会失败
  - 随着V<sub>DD</sub>的缩放，电压降变得更加明显
- 静态时序分析完全忽略电压降引起的延迟

## 良率、可靠性

### 良率

- 概念：按照圆片核算的成品率，是一个统计数据
- 重要性
  - 置信度
  - 成本

$$
Y=\frac{晶圆上成品芯片数量}{晶圆上芯片数量}\times 100\%
$$

#### 影响因素

- 工艺的成熟性
- 设计规则和器件模型的置信度
- 工艺的过程控制 (SPC/Cpk)
- 设计技术的成熟性
- 芯片面积 (Die size)

#### 提升良率的方法

- 遵循设计规则
- 优化设计，减小芯片面积
- 试产和评估，针对薄弱环节改进
- 量产过程关注PCM变化
  - PCM为槽中陪衬电路，进行圆片测试，划片时处理掉
  - 晶片需要减薄到原来的1/5，然后才能激光切割
- 存储器良率提升
  - 设计时加入规则化的冗余行列
  - 使用时采用ECC/EDC (编码技术)

### 可靠性

#### 半导体寿命

- 半导体器件失效规律：浴盆曲线
  - 早期失效：原始材料、加工构成的缺陷没有造成故障，但经不起长时间使用，一定要剔除
  - 中间无故障期：概率事件，用MTTF表征；出问题是极小概率事件
  - 寿命末期：故障概率急速上升，使用处于风险高危阶段

#### 主要失效机理

- 热载流子效应
- 栅击穿
- 金属电迁移

#### 早期失效和筛选

- 一般产品都应该进行早期失效的剔除筛选
- 一般采用加大应力从而加速
  - 通电和激发全部功能
  - 高低温循环冲击
- 不能过应力，会影响使用寿命
- 有相应的国际标准，但不是放之四海皆准

##### 寿命实验评估

- 很多应用要求有寿命预估或寿命评价
- 一般采用模型速测法：加速等效因子
- 一般采用高温加速

#### 封装可靠性问题

- 使用材料瑕疵
  - 树脂中的杂质、金属/陶瓷材料裂痕
  - 芯片被氧化
- 工艺尺寸偏差
  - 材料平整度超差，焊球尺寸不一致
- 加工过程带来瑕疵
  - 气泡、虚焊、搭接短路、密封失误
- 内部释放物
  - 内部多余物、逐步释放气体
  - 尤其是真空 (陶瓷)封装
- 应力不均
  - 热应力、机械应力

### 使用过程的可靠性

#### ESD

> 抗静电

- 所有MOS电路必须防范
  - 输入端都为薄栅，仅能耐受电源电压的1.5倍左右的电压
- 一般分防护等级 (500V-15kV)
- 对于不同电路不一样
  - 银行卡芯片 (约8kV)
  - 热插拔U盘 (约10kV)
  - 一般集成电路 (2k-4kV，因此需要用镊子)
- 防护电路

![保护环]( https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig09.jpg )

#### 辐射效应

- 抗总剂量效应
- 抗单粒子闩锁
- 抗单粒子击穿
- 抗单粒子反转 (最严重，影响逻辑功能)

#### 环境影响

- 电压：是一个范围，而且是波动的
- 温度/湿度/盐雾：根据使用要求确定
- 过流/浪涌：必要的保护和精细的电路设计
- 电磁兼容性 (端口)
  - 防止电压抖动和适应电压波动 (高频信号干扰主要影响模拟电路)
  - 防止输入毛刺

### 小结

- 制造不是完美的，应用是减寿的 (不用照样有问题)
- 测试的目的：找出生产后先天缺陷的个体
- 老化的目的：找出先天不足的个体
- 可靠性增长：通过改进设计和工艺提升良率和降低早期失效率
- 冗余：靠备份增强鲁棒性
- 环境影响：在空调间工作和在沙漠中工作对寿命影响不一样
- 寿命周期：长期磨损越来越容易出问题

## 封装与三维集成

### 封装

#### 考虑因素

- 管脚数
- 散热
- 体积
- 电磁兼容

#### 示例

- DIP
- QFP
- BGA
- SOC
- MCM
  - 快速将CPU连接到一个或两个外部缓存块
  - 价格昂贵，需要已知合格的经过测试的裸露未封装IC
- SIP (System in Package，多芯片叠装)
  - 例如iPhone 4的基带芯片，以及一些U盘Flash芯片，多个芯片集成为一个芯片
- SOP
- 倒装芯片 (Flip Chip)
  - 降低信号电感
    - 较短的互连长度
  - 更有效地使用电源
    - 直接在核心供电
    - 电源和地的管脚球更多
  - 更高的互连密度
    - 更大的可路由区域
  - 较小的包装尺寸
    - 芯片级封装
  - I/O无法控制核心大小
    - 区域阵列放置
    - 可能收缩
- PoP (封装叠层)
  - 例如A8芯片，大芯片间夹叠多个小芯片

![保护环]( https://github.com/VenciFreeman/Notes/blob/master/fig/ME04/ME04_chapter01_fig10.jpg )

### 3D封装

#### 各种形式

- TSV (Through Silicon Via，硅通孔技术)，减少互联生长
- C2W (Chip to Wafer)/Wafer Bonding
- RDL (Redistribution Layer)
- Micro Bumps/Cu Pillars/BGA/Flip Chip

#### 案例

##### HMC

- 打穿后共用一套线

##### HBM

- 带宽更高，每个芯片都引出输出 (典型的TSV)

##### FPGA

##### CIS

> 面对面晶圆