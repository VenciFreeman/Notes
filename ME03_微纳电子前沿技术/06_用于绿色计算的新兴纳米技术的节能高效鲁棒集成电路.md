# Energy-efficient and robust integrated circuits with emerging nanotechnologies for green computing

**主讲人：孙亚男**

[TOC]

## **简介**

### 微处理器历史趋势

#### 英特尔奔腾处理器的演变

##### 单核

> cache占芯片面积比越来越大

- Pentium 1 (1993)
  - 0.8 um
  - 60 MHz
- Pentium 2 (1997)
  - 0.35um
  - 300 MHz
- Pentium 3 (1999)
  - 0.18 um
  - 400 MHz
- Pentium 4 (2002)
  - 0.13um
  - 2.4 GHz

###### 单核的cache面积会一直增加么

- 不会

##### 多核

> 时钟频率增速放缓，多线程提升并行度

- Penryn (2007)
  - 45 nm
  - 3 GHz
  - 双核
- Bloomfield (2008)
  - 45 nm
  - 3.2 GHz
  - 四核
- Gulftown (2010)
  - 32 nm
  - 3.46 GHz
  - 六核
- Coffee Lake (2018)
  - 14 nm
  - 4.0 GHz
  - 八核

> 实际执行的部分只占芯片总面积的一小部分

#### 历史趋势

- 1949：EDSAC (Electronic Delay Storage Automatic Calculator，电子延迟存储自动计算器)
  - ~ 3000 逻辑真空管
  - 1024 18-bit 字
  - 5m × 4m
  - 12 kW
- 2018：Intel Core i9-9900KS Coffee Lake
  - 14 nm工艺
  - 17.36 亿晶体管
  - 1406 mm^2^ 面积
  - 8 核
  - 16 MB缓存
  - 3.6 GHz (基频)
  - 127 W (热设计功率)

#### 密度与晶体管性能

- 存储不足
- 非多核芯片
- 没有加速器
- 线延迟会让大芯片变慢

#### 微缩技术

![](..\fig\ME03\ME03_chapter06_fig01.jpg)

- 更小的特征尺寸
  - 更高的集成密度
  - 功能提升
  - 性能提升

##### 英特尔14nm制程

- 从14nm到14nm++的工艺，具有相同的FinFET几何尺寸
  - <u>驱动电流增加</u>23-24％
  - 在相同功率下的<u>性能提高</u>多达26％，在相同性能下的<u>功率降低</u>52％

![](..\fig\ME03\ME03_chapter06_fig02.jpg)

#### 晶体管统计

<img src="..\fig\ME03\ME03_chapter06_fig03.jpg" style="zoom:80%;" />

- 微处理器
- $6.9\times 10^9$：2018 HiSilicon 麒麟980 (octa-core mobile SoC, 7nm, 74.13mm^2^)
- $39.54\times 10^9$：2019 AMD AMD Epyc Rome (64-bit, 3D with 8 dies packaged, 7nm, 1088mm^2^)

##### 微处理器趋势数据

<img src="..\fig\ME03\ME03_chapter06_fig04.jpg" style="zoom:80%;" />

### CMOS技术功耗墙

#### 移动SoC功率路线图

<img src="..\fig\ME03\ME03_chapter06_fig05.jpg" style="zoom:80%;" />

- 电池寿命可能会超过个人移动设备的性能
  - 电源：运行处理器所需的能量
  - 静态功率：关闭时晶体管泄漏
  - 动态功率：切换晶体管需要的能量
- 亚阈值泄漏电流和晶体管数量**增加**
- $动态功率=晶体管数\times 电容\times 电压^2\times频率$

#### 功耗是关键问题

- 更高的功耗会增加芯片温度和热点
- 功耗需求冷却
  - 对于便携设备而言，冷却是一个巨大的挑战
  - 而对于数据中心而言，这是一个更大的挑战 (非常昂贵)
- 功率密度高，不能假设均匀性
  - 随着芯片温度的升高，CMOS逻辑速度变慢
  - 在高芯片温度下，长期可靠性可能会受到影响

#### CMOS的功耗墙

- 由于Dennard缩放比例定律的结束，出现了“功率墙”
  - 随着晶体管的变小，功率密度不再更长的时间保持不变
- 频率的增加使功率密度增加，而性能却没有得到太大提高
  - 频率增加没有机会使处理器更快
- 可以通过降低电压来降低功率，但是很难进一步降低电压
- 下一代处理器需要使用更少的电力

### 存储墙和冯诺依曼架构

- 今天的大多数计算机采用冯诺依曼架构
- 运算器，控制器，存储器，输入，输出
  - 数据和指令都以二进制数字的形式存储在主存储中
  - 一次一次从内存中取出指令 (串行)
  - 主内存和CPU分开

<img src="..\fig\ME03\ME03_chapter06_fig06.jpg" style="zoom:70%;" />

#### 内存速度

<img src="..\fig\ME03\ME03_chapter06_fig07.jpg" style="zoom:70%;" />

- 扩大处理器与DRAM的性能差距
  - 内存密度和容量随着CPU能力和兼容性的提高而增长，但是内存速度却没有跟上
  - 当频率增加时，主内存成为性能瓶颈

#### 缓存

- 高速缓存存储器充当超快速处理器和慢得多的主存储器之间的**中介**
- 处理器现在访问快速的高速缓存，只有那些在高速缓存中丢失的罕见访问才进入慢速主存储器

<img src="..\fig\ME03\ME03_chapter06_fig08.jpg" style="zoom:70%;" />

#### DRAM与SRAM

- DRAM用于主存中
  - 每比特存储为电容中的电荷值 (必须要刷新)
  - 很小，但比SRAM慢 (大概5-10倍)
- SRAM用于缓存中
  - 每比特存储为交叉耦合反向器
  - 很快，但比DRAM占据更大的面积 (6-8个晶体管)

#### 典型的存储树

<img src="..\fig\ME03\ME03_chapter06_fig09.jpg" style="zoom:70%;" />

## **超越硅的低功耗电路**

### 碳基二维集成电路技术

#### 为什么是碳

- 硅正在接近基本物理极限
- 碳纳米管晶体管是低于10 nm区域最有希望的候选材料之一
  - 超薄的体量 (直径约1 nm)
  - 良好抑制的漏电流
  - 空穴和电子的高载流子迁移率
  - 高达9.0倍的能量延迟产品 (EDP)优势

#### 短沟道碳纳米管晶体管

<img src="..\fig\ME03\ME03_chapter06_fig10.jpg" style="zoom:70%;" />

##### 碳基电子产品将成为首选的低功耗动态逻辑系列

<img src="..\fig\ME03\ME03_chapter06_fig11.jpg" style="zoom:70%;" />

##### 针对碳纳米管晶体管技术的新型变强度保持器动态逻辑电路技术

- 根据动态节点的逻辑状态来动态调整强度保持器
  - 低功耗
  - 高抗扰度

<img src="..\fig\ME03\ME03_chapter06_fig12.jpg" style="zoom:70%;" />

##### 采用碳纳米管晶体管技术的传统6晶体管存储单元的难题

- 6晶体管静态随机存取存储器 (SRAM)单元是行业标准
- 读取数据不稳定
  - 由于直接访问数据存储节点，数据容易受到外部噪声的影响
- 弱的写能力
  - 高空穴迁移率
  - 明显更强的p沟道CN-MOSFET削弱了写入能力

<img src="..\fig\ME03\ME03_chapter06_fig13.jpg" style="zoom:70%;" />

##### 9晶体管的坚固碳纳米管SRAM电池

- 单端/隔离读取端口：增强了数据稳定性
- n通道写辅助晶体管和p通道写位线访问晶体管：更强的写入能力
- 与传统的6-CN-MOSFET SRAM相比，可以实现更低的V~DDmin~

<img src="..\fig\ME03\ME03_chapter06_fig14.jpg" style="zoom:70%;" />

#### 碳纳米管晶体管的非理想性质

- 金属碳纳米管 (m-CN)在CN-MOSFET中的源极和漏极端子之间造成短路
- 为了实现功能性VLSI电路，m-CN需从CN-MOSFET的沟道阵列中移除

<img src="..\fig\ME03\ME03_chapter06_fig15.jpg" style="zoom:70%;" />

### 非易失性存储器存内计算集成纳米技术

#### 为什么要三维集成

- 常规2D集成技术的长期全局互连
  - 功耗和性能下降
- 存储墙和功耗墙，特别是在大量数据应用中

<img src="..\fig\ME03\ME03_chapter06_fig16.jpg" style="zoom:60%;" />

##### 整体式3D：逻辑+存储+传感器

- 增加数据带宽

##### 实现整体式3D

- 低温制造：< 400 ℃
  - 逻辑与传感器：CNFETS < 200 ℃
  - 存储：RRAM < 200 ℃

#### 新兴技术的3D纳米系统

- 同时实现改进的器件和新的集成电路架构
  - 大于200万个碳纳米场效应管，1 Mbit RRAM

<img src="..\fig\ME03\ME03_chapter06_fig17.jpg" style="zoom:60%;" />

##### 超尺寸计算机的3D纳系统

- 用于HA计算的整体式3D导航系统
  - 测量出98％的语言分类准确度 (可抵抗78％的死机故障)
- CNFET，RRAM，单片3D克服了实现挑战
  - 关键：低温 (<400℃)制造
- 利用高清的本机纳米技术特性
  - 固有变化，RRAM模拟累加器，容错性
- <img src="..\fig\ME03\ME03_chapter06_fig19.jpg" style="zoom:60%;" />

##### M3D集成技术中4N2P 6-CH-MOSFET SRAM单元面临的挑战

- 顶部和底部器件层之间的大面积偏斜
  - 大量的偏斜：顶层有4个n沟道晶体管，而顶层有2个p沟道晶体管
  - 尺寸偏差大：p沟道CN-MOSFET的尺寸要远小于n沟道CN-MOSFET的强写入能力
- 不同器件层上CN-MOSFET的工艺变化

<img src="..\fig\ME03\ME03_chapter06_fig18.jpg" style="zoom:60%;" />

##### 新兴的单片3D碳纳米管存储器提高产量和集成密度

- 强大的读取稳定性和快速的读取速度
- 高M3D集成密度以及NMOS和PMOS的平衡数量

<img src="..\fig\ME03\ME03_chapter06_fig20.jpg" style="zoom:60%;" />

## **新型架构和存储应用**

> 可靠节能的DNN存储中计算
>
> 用于算术运算的逻辑存储
>
> 用于常态计算的非易失性存储器

#### 存内计算

- 存内计算是具有单个基础主体的多种技术
  - 有时在内存中创建额外计算比将数据从内存移动到主要计算更好 (更快或更有效)
- 对于当今的数据处理应用程序和后摩尔设计尤其重要

#### 超越冯诺依曼架构：存内计算

- 左侧为处理单元和常规内存，右侧为处理单元和计算存储器
- 使用“某些”存储核心/单元执行“某些”计算任务，而无需在过程中来回穿梭数据
  - 机器学习算法
  - 逻辑运算
  - 算术运算
- 利用存储设备的物理属性和状态动态

<img src="..\fig\ME03\ME03_chapter06_fig21.jpg" style="zoom:60%;" />

#### "内存中"是相对的

- 存内计算相对于同时具有计算和内存的现有系统
- 通常，CPU在L1缓存上工作
- 内存计算可能意味着
  - 以L2/L3 (SRAM)计算
  - 在DRAM芯片中计算
  - 在包含内存 (例如非易失性内存)的加速器中进行计算

#### 近年的一些研究

<img src="..\fig\ME03\ME03_chapter06_fig22.jpg" style="zoom:60%;" />

#### 向量矩阵乘法：XBAR

- 机器学习算法是神经网络功能的实现，主要是矢量矩阵乘法 (VMM)
- 在交叉点/交叉开关阵列中，可以在存储权重的相同空间中并行应用VMM操作
  - 权重是行和列之间的可编程电导

<img src="..\fig\ME03\ME03_chapter06_fig23.jpg" style="zoom:60%;" />

- 在纵横制数组中，权重可以加载一次 (以供推断)
  - 矢量载荷为$O(N)$
- 通过一次并行“读取”完成的VMM操作
  - 更少的数据传输：更高的能源效率
  - 大规模并行操作：更高的带宽

<img src="..\fig\ME03\ME03_chapter06_fig24.jpg" style="zoom:60%;" />

#### 新兴的NVM技术：总结

<img src="..\fig\ME03\ME03_chapter06_fig25.jpg" style="zoom:80%;" />

- 氧化物ReRAM是用于VMM交叉开关的主要技术
  - 基于ReRAM的vs定制的：> 1000倍的速度能源效率

##### ReRAM类型：SLC和MLC

- ReRAM电阻：低阻态 (LRS)，高阻态 (HRS)

|      |    SLC (单级单元)    |       MLC (多级单元)       |
| :--: | :------------------: | :------------------------: |
|  级  |          2           |            > 2             |
| 电阻 |    低阻态，高阻态    | 低阻态，高阻态和几个多阻态 |
| 优点 |       容易实现       |   减少用于多种状态的器件   |
| 缺点 | 多种状态需要更多器件 |      超过3位难以实现       |

#### ReRAM并不完美

##### 电阻变化

- 定义
  - 抵抗力偏离预期
- 源头
  - 制作工艺不完善
  - 基于随机灯丝的切换
- 模型
  - 对数正态分布 $R=R_0·e^\theta,\theta~N(0,\sigma)$
- 偏差可能是中值电阻的100％

##### MSB放大变异

- 二进制编码的权重具有MSB (最高有效位)和LSB (最低有效位)
- MSB中的电阻变化将放大重量偏差：精度损失

<img src="..\fig\ME03\ME03_chapter06_fig26.jpg" style="zoom:80%;" />

#### 一进制：新颖的突触编码

- 一进制编码使用**1或0**的数字表示值
- 每一位具有**相同的意义**
- 随机计算
  - 一元编码对位翻转错误具有很强的容忍度
- 利用想法解决变化问题

<img src="..\fig\ME03\ME03_chapter06_fig27.jpg" style="zoom:80%;" />

- SLC ReRAM具有更好的变化容限
- 为了表示范围0〜15，二进制和一进制分别需要4和15个SLC

##### 优先级映射

- 一元编码具有灵活性
  - (33310)~unary~ = (31303)~unary~ = ... (10)~decimal~
- 较低的电阻（较高的电导）：较大的偏差
  - $G=G_0·e^{-\theta}, \theta$~$N(0,\sigma)$
- 设$e^{-\theta}=1.1$
  - HRS：$G_0=0.001\rightarrow G=0.0011\rightarrow \Delta G=0.001$
  - LRS：$G_0=1.0\rightarrow G=1.1\rightarrow \Delta G=0.1$

> 将较低的电阻状态映射到较小变化的器件

## **总结**

- 碳纳米管晶体管具有极大提高能源效率和3D集成技术的潜力
- 非易失性存储器，如ReRAM，可以设计为在深度神经网络中用作计算存储器，并用于数据密集型应用程序的算术运算
- ReRAM还可以通过利用频繁关闭和即时启动应用的多级单元特性来实现高能效
- 鲁棒性和节能方面的重大改进主要来自电路拓扑，内存计算架构和优化算法的创新